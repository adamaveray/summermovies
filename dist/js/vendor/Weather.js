window.Weather=function(){"use strict";function t(t,e){return e="c"===t?1.8*e+32:5/9*(e-32),Math.round(e)}function e(t,e){return"https://s.yimg.com/"+("3200"===t?"os/mit/media/m/weather/images/icons/l/44d-100567.png":"zz/combo?a/i/us/nws/weather/gr/"+t+e+".png")}function i(t,e,i){var o=new XMLHttpRequest;o.open(t,e,!0),o.onreadystatechange=function(){4===this.readyState&&i(this)},o.send(),o=null}function o(i,o){if(!(i&&i.query&&i.query.results&&i.query.results.channel&&"Yahoo! Weather Error"!==!i.query.results.channel.description))return null;var n=i.query.results.channel,r=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW","N"],s={unit:o,title:n.item.title,temp:n.item.condition.temp,code:n.item.condition.code,todayCode:n.item.forecast[0].code,currently:n.item.condition.text,heatIndex:n.item.condition.temp,high:n.item.forecast[0].high,low:n.item.forecast[0].low,text:n.item.forecast[0].text,humidity:n.atmosphere.humidity,pressure:n.atmosphere.pressure,rising:n.atmosphere.rising,visibility:n.atmosphere.visibility,sunrise:n.astronomy.sunrise,sunset:n.astronomy.sunset,description:n.item.description,city:n.location.city,country:n.location.country,region:n.location.region,updated:n.item.pubDate,link:n.item.link,image:e(n.item.condition.code,"d"),thumbnail:e(n.item.condition.code,"ds"),forecast:[],units:{temp:n.units.temperature,distance:n.units.distance,pressure:n.units.pressure,speed:n.units.speed},wind:{chill:n.wind.chill,direction:r[Math.round(n.wind.direction/22.5)],speed:n.wind.speed}};s.alt={unit:"c"===o?"f":"c",temp:t(o,n.item.condition.temp),high:t(o,n.item.forecast[0].high),low:t(o,n.item.forecast[0].low)},n.item.condition.temp<80&&n.atmosphere.humidity<40&&(s.heatindex=2.04901523*n.item.condition.temp-42.379+10.14333127*n.atmosphere.humidity-.22475541*n.item.condition.temp*n.atmosphere.humidity-6.83783*Math.pow(10,-3)*Math.pow(n.item.condition.temp,2)-5.481717*Math.pow(10,-2)*Math.pow(n.atmosphere.humidity,2)+1.22874*Math.pow(10,-3)*Math.pow(n.item.condition.temp,2)*n.atmosphere.humidity+8.5282*Math.pow(10,-4)*n.item.condition.temp*Math.pow(n.atmosphere.humidity,2)-1.99*Math.pow(10,-6)*Math.pow(n.item.condition.temp,2)*Math.pow(n.atmosphere.humidity,2));for(var a=0;a<n.item.forecast.length;a++){var c=n.item.forecast[a];c.alt={high:t(o,n.item.forecast[a].high),low:t(o,n.item.forecast[a].low)},c.image=e(c.code,"d"),c.thumbnail=e(c.code,"ds"),s.forecast.push(c)}return s}return function(t,e,n){var r;switch(typeof t){case"number":r="woeid="+t;break;case"string":break;case"object":if(null!=t.lat&&null!=t.lng){t="("+t.lat+","+t.lng+")";break}default:throw new Error("Invalid location format")}r||(r='woeid in (select woeid from geo.places(1) where text="'+t+'")');var s=new Date,a="select * from weather.forecast where "+r+' and u="'+e+'"';i("GET","https://query.yahooapis.com/v1/public/yql?format=json&rnd="+encodeURIComponent(s.getFullYear()+s.getMonth()+s.getDay()+s.getHours())+"&diagnostics=true&q="+encodeURIComponent(a),function(t){if(t.status<200||t.status>=400)n(t);else{try{var i=JSON.parse(t.responseText)}catch(t){return void n()}var r=o(i,e);n(r)}})}}();