window.Weather=function(){"use strict";function h(t,e){return e="c"===t?1.8*e+32:5/9*(e-32),Math.round(e)}function u(t,e){return"https://s.yimg.com/"+("3200"===t?"os/mit/media/m/weather/images/icons/l/44d-100567.png":"zz/combo?a/i/us/nws/weather/gr/"+t+e+".png")}return function(t,o,n){var e;switch(typeof t){case"number":e="woeid="+t;break;case"string":break;case"object":if(null!=t.lat&&null!=t.lng){t="("+t.lat+","+t.lng+")";break}default:throw new Error("Invalid location format")}e||(e='woeid in (select woeid from geo.places(1) where text="'+t+'")');var i,r,s,a,c=new Date,m="select * from weather.forecast where "+e+' and u="'+o+'"',d="https://query.yahooapis.com/v1/public/yql?format=json&rnd="+encodeURIComponent(c.getFullYear()+c.getMonth()+c.getDay()+c.getHours())+"&diagnostics=true&q="+encodeURIComponent(m);i="GET",r=d,s=function(t){if(t.status<200||400<=t.status)n(t);else{try{var e=JSON.parse(t.responseText)}catch(t){return void n()}var i=function(t,e){if(!(t&&t.query&&t.query.results&&t.query.results.channel&&"Yahoo! Weather Error"!==!t.query.results.channel.description))return null;var i=t.query.results.channel,o={unit:e,title:i.item.title,temp:i.item.condition.temp,code:i.item.condition.code,todayCode:i.item.forecast[0].code,currently:i.item.condition.text,heatIndex:i.item.condition.temp,high:i.item.forecast[0].high,low:i.item.forecast[0].low,text:i.item.forecast[0].text,humidity:i.atmosphere.humidity,pressure:i.atmosphere.pressure,rising:i.atmosphere.rising,visibility:i.atmosphere.visibility,sunrise:i.astronomy.sunrise,sunset:i.astronomy.sunset,description:i.item.description,city:i.location.city,country:i.location.country,region:i.location.region,updated:i.item.pubDate,link:i.item.link,image:u(i.item.condition.code,"d"),thumbnail:u(i.item.condition.code,"ds"),forecast:[],units:{temp:i.units.temperature,distance:i.units.distance,pressure:i.units.pressure,speed:i.units.speed},wind:{chill:i.wind.chill,direction:["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW","N"][Math.round(i.wind.direction/22.5)],speed:i.wind.speed}};o.alt={unit:"c"===e?"f":"c",temp:h(e,i.item.condition.temp),high:h(e,i.item.forecast[0].high),low:h(e,i.item.forecast[0].low)},i.item.condition.temp<80&&i.atmosphere.humidity<40&&(o.heatindex=2.04901523*i.item.condition.temp-42.379+10.14333127*i.atmosphere.humidity-.22475541*i.item.condition.temp*i.atmosphere.humidity-6.83783*Math.pow(10,-3)*Math.pow(i.item.condition.temp,2)-5.481717*Math.pow(10,-2)*Math.pow(i.atmosphere.humidity,2)+1.22874*Math.pow(10,-3)*Math.pow(i.item.condition.temp,2)*i.atmosphere.humidity+8.5282*Math.pow(10,-4)*i.item.condition.temp*Math.pow(i.atmosphere.humidity,2)-1.99*Math.pow(10,-6)*Math.pow(i.item.condition.temp,2)*Math.pow(i.atmosphere.humidity,2));for(var n=0;n<i.item.forecast.length;n++){var r=i.item.forecast[n];r.alt={high:h(e,i.item.forecast[n].high),low:h(e,i.item.forecast[n].low)},r.image=u(r.code,"d"),r.thumbnail=u(r.code,"ds"),o.forecast.push(r)}return o}(e,o);n(i)}},(a=new XMLHttpRequest).open(i,r,!0),a.onreadystatechange=function(){4===this.readyState&&s(this)},a.send(),a=null}}();